"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[539],{539:(j,p,r)=>{r.r(p),r.d(p,{LoginPageModule:()=>w});var h=r(177),a=r(4341),i=r(4742),m=r(9384),f=r(467),o=r(3953),v=r(2872),b=r(9212),F=r(385);const C=()=>["/reset-password"],k=()=>["/reporte"],P=()=>["/registro"];function M(t,s){1&t&&(o.j41(0,"span",11),o.EFF(1,"Ingrese un email v\xe1lido"),o.k0s())}function O(t,s){1&t&&(o.j41(0,"span",11),o.EFF(1,"Ingrese una contrase\xf1a"),o.k0s())}const E=[{path:"",component:(()=>{var t;class s{constructor(e,n,l,c){this.navController=e,this.alertController=n,this.authService=l,this.router=c,this.submitted=!1,this.loginForm=new a.gE({email:new a.MJ("",[a.k0.email,a.k0.required]),password:new a.MJ("",[a.k0.required])})}ngOnInit(){this.authService.logout(),this.authService.user$.subscribe(e=>{e&&console.log("Usuario logueado:",e)})}loginAlert(e){var n=this;return(0,f.A)(function*(){yield(yield n.alertController.create({header:e.header,message:e.message,buttons:["Ok"]})).present()})()}login(){if(this.submitted=!0,this.loginForm.valid){var e,n;let l=null===(e=this.loginForm.get("email"))||void 0===e||null===(e=e.value)||void 0===e?void 0:e.toLowerCase(),c=null===(n=this.loginForm.get("password"))||void 0===n?void 0:n.value;this.authService.login(l,c).then(u=>{this.navigate(u.role)}).catch(u=>{switch(u.code){case"auth/too-many-requests":this.loginAlert({header:"Bloqueo temporal",message:"Demaciados intentos fallidos, el usuario ha sido bloqueado temporalmente"});break;case"auth/invalid-credential":this.loginAlert({header:"Error de login",message:"Correo o contrase\xf1a incorrecto"})}})}}navigate(e){"admin"===e&&this.navController.navigateRoot("admin"),"client"===e&&this.navController.navigateRoot("client")}googleSignIn(){var e=this;return(0,f.A)(function*(){try{(yield e.authService.googleSignIn())&&(yield e.router.navigate(["/home"]))}catch(n){console.error("Error en la autenticaci\xf3n:",n)}})()}}return(t=s).\u0275fac=function(e){return new(e||t)(o.rXU(v.q9),o.rXU(i.hG),o.rXU(b.u),o.rXU(m.Ix))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-login"]],decls:51,vars:13,consts:[["id","login-content",1,"ion-page"],["id","main-content",1,"ion-padding"],[1,"login-container"],[1,"main-titulo"],[1,"form-container"],[1,"subtitle"],[1,"title"],[1,"login-form",3,"ngSubmit","formGroup"],["position","floating",2,"color","black"],["label","Correo Electr\xf3nico","label-placement","stacked","type","text","placeholder","Ejemplo@email.com","formControlName","email",1,"input-background",2,"color","black"],["name","mail-outline","slot","end"],[1,"danger"],["label","Contrase\xf1a","id","password","labelPlacement","stacked","type","password","placeholder","Contrase\xf1a","formControlName","password",1,"input-background",2,"color","black"],["name","lock-closed-outline","slot","end"],["slot","end"],[1,"recuperar-contra"],[2,"color","black",3,"routerLink"],["expand","block",1,"login-button",3,"routerLink"],["lines","none",1,"recuerdame"],["expand","block",3,"click"],["slot","start","name","logo-google"],[1,"registro-text"],[3,"routerLink"],[1,"custom-footer"],[1,"footer-content"],[1,"social-icons"],["name","logo-instagram"],["name","logo-facebook"],["name","logo-whatsapp"],["name","logo-twitter"]],template:function(e,n){if(1&e&&(o.nrm(0,"app-header"),o.j41(1,"div",0)(2,"ion-content",1)(3,"div",2)(4,"h1",3),o.EFF(5,"Iniciar sesi\xf3n"),o.k0s(),o.j41(6,"div",4)(7,"h2",5),o.EFF(8,"INICIO DE SESI\xd3N POR CORREO"),o.k0s(),o.j41(9,"h3",6),o.EFF(10,"Iniciar sesi\xf3n"),o.k0s(),o.j41(11,"form",7),o.bIt("ngSubmit",function(){return n.login()}),o.j41(12,"ion-item")(13,"ion-label",8),o.EFF(14,"Email"),o.k0s(),o.nrm(15,"ion-input",9)(16,"ion-icon",10),o.DNE(17,M,2,0,"span",11),o.k0s(),o.j41(18,"ion-item")(19,"ion-label",8),o.EFF(20,"Contrase\xf1a"),o.k0s(),o.nrm(21,"ion-input",12)(22,"ion-icon",13)(23,"ion-input-password-toggle",14),o.DNE(24,O,2,0,"span",11),o.k0s(),o.j41(25,"div",15)(26,"a",16),o.EFF(27,"\xbfOlvid\xf3 su contrase\xf1a?"),o.k0s()(),o.j41(28,"ion-button",17),o.EFF(29,"Iniciar sesi\xf3n"),o.k0s(),o.j41(30,"ion-item",18)(31,"ion-label"),o.EFF(32,"Recu\xe9rdame"),o.k0s(),o.nrm(33,"ion-toggle",14),o.k0s(),o.j41(34,"ion-button",19),o.bIt("click",function(){return n.googleSignIn()}),o.nrm(35,"ion-icon",20),o.EFF(36," Iniciar sesi\xf3n con Google "),o.k0s()()(),o.j41(37,"div",21)(38,"p"),o.EFF(39,"No tienes una cuenta? "),o.j41(40,"a",22),o.EFF(41,"Reg\xedstrate aqu\xed"),o.k0s()()()()(),o.j41(42,"ion-footer",23)(43,"div",24)(44,"div"),o.EFF(45,"\xa9 2024 Safe City"),o.k0s(),o.j41(46,"div",25),o.nrm(47,"ion-icon",26)(48,"ion-icon",27)(49,"ion-icon",28)(50,"ion-icon",29),o.k0s()()()()),2&e){let l,c,u,d;o.R7$(11),o.Y8G("formGroup",n.loginForm),o.R7$(4),o.AVh("is-invalid",(null==(l=n.loginForm.get("email"))?null:l.invalid)&&n.submitted||(null==(l=n.loginForm.get("email"))?null:l.invalid)&&(null==(l=n.loginForm.get("email"))?null:l.touched)),o.R7$(2),o.vxM(null!=(c=n.loginForm.get("email"))&&c.invalid&&n.submitted||null!=(c=n.loginForm.get("email"))&&c.invalid&&null!=(c=n.loginForm.get("email"))&&c.touched?17:-1),o.R7$(4),o.AVh("is-invalid",(null==(u=n.loginForm.get("password"))?null:u.invalid)&&n.submitted||(null==(u=n.loginForm.get("password"))?null:u.invalid)&&(null==(u=n.loginForm.get("password"))?null:u.touched)),o.R7$(3),o.vxM(null!=(d=n.loginForm.get("password"))&&d.invalid&&n.submitted||null!=(d=n.loginForm.get("password"))&&d.invalid&&null!=(d=n.loginForm.get("password"))&&d.touched?24:-1),o.R7$(2),o.Y8G("routerLink",o.lJ4(10,C)),o.R7$(2),o.Y8G("routerLink",o.lJ4(11,k)),o.R7$(12),o.Y8G("routerLink",o.lJ4(12,P))}},dependencies:[a.qT,a.BC,a.cb,i.Jm,i.W9,i.M0,i.iq,i.$w,i.Wv,i.uz,i.he,i.BY,i.hB,i.Gw,i.N7,i.oY,m.Wk,F.l,a.j4,a.JD],styles:["[_nghost-%COMP%]{--ion-background-color: #ffffff}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;padding:20px}.main-titulo[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin-bottom:20px;color:#000}.form-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:20px;box-shadow:0 2px 10px #0000001a}.subtitle[_ngcontent-%COMP%]{font-size:12px;color:#000;margin-bottom:5px;text-transform:uppercase}.title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin-bottom:20px;color:#000a14}ion-item[_ngcontent-%COMP%]{--background: #f4f4f4;--border-radius: 4px;--padding-start: 0;margin-bottom:16px}ion-label[_ngcontent-%COMP%]{color:#000}ion-icon[_ngcontent-%COMP%]{color:#000}.recuperar-contra[_ngcontent-%COMP%]{text-align:right;margin-bottom:20px}.recuperar-contra[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;font-size:14px;text-decoration:none}.login-button[_ngcontent-%COMP%]{--background: #7e57c2;--border-radius: 4px;margin-bottom:16px}.recuerdame[_ngcontent-%COMP%]{--background: transparent;margin-bottom:16px}.boton-inicio[_ngcontent-%COMP%]{--border-color: #cccccc;--border-radius: 4px;--color: #333333}.registro-text[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.registro-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#7e57c2;font-weight:700;text-decoration:none}.custom-toolbar[_ngcontent-%COMP%]{background-color:#000a14}.menu-button[_ngcontent-%COMP%]{color:#000}.custom-title[_ngcontent-%COMP%]{color:#df0909d8;font-weight:700}.custom-footer[_ngcontent-%COMP%]{background:#004ba8;color:#fff;text-align:center;padding:10px 0}.social-icons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin-top:10px;color:#ccc}"]}),s})()}];let L=(()=>{var t;class s{}return(t=s).\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[m.iI.forChild(E),m.iI]}),s})();var x=r(5553);let w=(()=>{var t;class s{}return(t=s).\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[h.MD,a.YN,i.bv,L,x.h,a.X1]}),s})()}}]);
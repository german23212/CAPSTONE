<app-header></app-header>

<!-- Contenido principal -->
<div class="ion-page" id="login-content"> 
  <ion-content class="ion-padding" id="main-content">
    <div class="login-container">

      <div class="form-container">
        <h3 class="title" style="text-align: center;">Iniciar sesión</h3>

        <form class="login-form" [formGroup]="loginForm" (ngSubmit)="login()">
          <ion-item>
            <ion-input style="color: black;" class="input-background" label="Correo Electrónico" label-placement="stacked" type="text" placeholder="Ejemplo@email.com"
            formControlName="email" [class.is-invalid]="
            (loginForm.get('email')?.invalid && submitted) || 
            (loginForm.get('email')?.invalid && loginForm.get('email')?.touched)">
            <ion-icon name="mail-outline" slot="start"></ion-icon>
          
          </ion-input>
          </ion-item>
          @if ((loginForm.get('email')?.invalid && submitted) || loginForm.get('email')?.invalid && loginForm.get('email')?.touched) {
            <span class="danger">Ingrese un email válido</span>
          }

          <ion-item>
            <ion-input style="color: black;" class="input-background" label="Contraseña" id="password" labelPlacement="stacked" type="password" placeholder="Contraseña"
            formControlName="password" 
            [class.is-invalid]="(loginForm.get('password')?.invalid && submitted) || 
            loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
            <ion-input-password-toggle slot="end"></ion-input-password-toggle>
            <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
          </ion-input>

          </ion-item>
          @if ((loginForm.get('password')?.invalid && submitted) || loginForm.get('password')?.invalid && loginForm.get('password')?.touched) {
            <span class="danger">Ingrese una contraseña</span>
        }

          <div class="recuperar-contra">
            <ion-label>Recuérdame</ion-label>
            <ion-toggle slot="start"></ion-toggle>
            <a style="color: black;" [routerLink]="['/reset-password']">¿Olvidó su contraseña?</a>
          </div>
          <ion-button expand="block" class="login-button" type="submit">Iniciar sesión</ion-button>

          <ion-button (click)="googleSignIn()" expand="block" type="submit">
            <ion-icon slot="start" name="logo-google"></ion-icon>
            Iniciar sesión con Google
          </ion-button>
        </form>
      </div>

      <div class="registro-text">
        <p>No tienes una cuenta? <a [routerLink]="['/registro']">Regístrate aquí</a></p>
      </div>
    </div>
  </ion-content>

  <!-- Footer -->
  <ion-footer class="custom-footer">
    <div class="footer-content">
      <div>© 2024 Safe City</div>
      <div class="social-icons">
        <ion-icon name="logo-instagram"></ion-icon>
        <ion-icon name="logo-facebook"></ion-icon>
        <ion-icon name="logo-whatsapp"></ion-icon>
        <ion-icon name="logo-twitter"></ion-icon>
      </div>
    </div>
  </ion-footer>
</div>
